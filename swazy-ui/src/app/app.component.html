<div class="container mx-auto p-4">
  <h1 class="text-2xl font-bold mb-4">Services Management</h1>

  <!-- Create Service Form -->
  <div class="mb-8 p-4 border rounded-lg shadow">
    <h2 class="text-xl font-semibold mb-2">Create New Service</h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <div>
        <label class="label">
          <span class="label-text">Tag</span>
        </label>
        <input type="text" [(ngModel)]="newService.tag" placeholder="Service Tag" class="input input-bordered w-full" />
      </div>
      <div>
        <label class="label">
          <span class="label-text">Value</span>
        </label>
        <input type="text" [(ngModel)]="newService.value" placeholder="Service Value" class="input input-bordered w-full" />
      </div>
      <div>
        <label class="label">
          <span class="label-text">Business Type</span>
        </label>
        <select [(ngModel)]="newService.businessType" class="select select-bordered w-full">
          <option *ngFor="let type of businessTypes" [ngValue]="type">{{ BusinessTypeLabel[type as number] }}</option>
        </select>
      </div>
    </div>
    <button (click)="createService()" class="btn btn-primary mt-4">Create Service</button>
  </div>

  <!-- Edit Service Form (conditional) -->
  <div *ngIf="editingService" class="mb-8 p-4 border rounded-lg shadow bg-base-200">
    <h2 class="text-xl font-semibold mb-2">Edit Service: {{ editingService.tag }}</h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <div>
        <label class="label">
          <span class="label-text">Tag</span>
        </label>
        <input type="text" [(ngModel)]="editingService.tag" placeholder="Service Tag" class="input input-bordered w-full" />
      </div>
      <div>
        <label class="label">
          <span class="label-text">Value</span>
        </label>
        <input type="text" [(ngModel)]="editingService.value" placeholder="Service Value" class="input input-bordered w-full" />
      </div>
      <div>
        <label class="label">
          <span class="label-text">Business Type</span>
        </label>
        <select [(ngModel)]="editingService.businessType" class="select select-bordered w-full">
          <option *ngFor="let type of businessTypes" [ngValue]="type">{{ BusinessTypeLabel[type as number] }}</option>
        </select>
      </div>
    </div>
    <div class="mt-4">
      <button (click)="updateService()" class="btn btn-primary mr-2">Update Service</button>
      <button (click)="cancelEdit()" class="btn btn-ghost">Cancel</button>
    </div>
  </div>

  <!-- Services List -->
  <div class="overflow-x-auto">
    <h2 class="text-xl font-semibold mb-2">Existing Services</h2>
    <table class="table w-full table-zebra">
      <thead>
        <tr>
          <th>ID</th>
          <th>Tag</th>
          <th>Value</th>
          <th>Business Type</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let service of services">
          <td>{{ service.id }}</td>
          <td>{{ service.tag }}</td>
          <td>{{ service.value }}</td>
          <td>{{ BusinessTypeLabel[service.businessType as number] }}</td>
          <td>
            <button (click)="editService(service)" class="btn btn-sm btn-outline btn-info mr-2">Edit</button>
            <button (click)="deleteService(service.id)" class="btn btn-sm btn-outline btn-error">Delete</button>
          </td>
        </tr>
        <tr *ngIf="services.length === 0">
          <td colspan="5" class="text-center">No services found.</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
